<!doctype html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- SEO -->
    <title>API Testing 101s: Quick and Easy</title>
    <meta name="description" content="Presentation slides for DevConf.CZ 2020">

    <!-- URL CANONICAL -->
    <!-- <link rel="canonical" href="http://your-url.com/"> -->

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,700,700i%7CMaitree:200,300,400,600,700&amp;subset=latin-ext"
          rel="stylesheet">

    <!-- CSS WebSlides -->
    <link rel="stylesheet" type='text/css' media='all' href="static/css/webslides.css">

    <!-- Optional - CSS SVG Icons (Font Awesome) -->
    <link rel="stylesheet" type='text/css' media='all' href="static/css/svg-icons.css">

    <!-- Adding stylesheet for code hightlights-->
    <link rel="stylesheet" href="./static/highlight/styles/default.css">
    <script src="./static/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- SOCIAL CARDS (ADD YOUR INFO) -->

    <!-- FACEBOOK -->
    <meta property="og:url" content="http://your-url.com/"> <!-- YOUR URL -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="WebSlides — Making HTML Presentations Easy"> <!-- EDIT -->
    <meta property="og:description"
          content="WebSlides is about telling stories beautifully. Just the essential features. Good karma.">
    <!-- EDIT -->
    <meta property="og:updated_time" content="2017-01-04T17:20:50"> <!-- EDIT -->
    <meta property="og:image" content="static/images/share-webslides.jpg"> <!-- EDIT -->

    <!-- TWITTER -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@webslides"> <!-- EDIT -->
    <meta name="twitter:creator" content="@jlantunez"> <!-- EDIT -->
    <meta name="twitter:title" content="WebSlides — Making HTML Presentations Easy"> <!-- EDIT -->
    <meta name="twitter:description"
          content="WebSlides is about good karma. Just essential features. 120+ free slides ready to use."><!-- EDIT -->
    <meta name="twitter:image" content="static/images/share-webslides.jpg"> <!-- EDIT -->

    <!-- FAVICONS -->
    <link rel="shortcut icon" sizes="16x16" href="static/images/favicons/favicon.png">
    <link rel="shortcut icon" sizes="32x32" href="static/images/favicons/favicon-32.png">
    <link rel="apple-touch-icon icon" sizes="76x76" href="static/images/favicons/favicon-76.png">
    <link rel="apple-touch-icon icon" sizes="120x120" href="static/images/favicons/favicon-120.png">
    <link rel="apple-touch-icon icon" sizes="152x152" href="static/images/favicons/favicon-152.png">
    <link rel="apple-touch-icon icon" sizes="180x180" href="static/images/favicons/favicon-180.png">
    <link rel="apple-touch-icon icon" sizes="192x192" href="static/images/favicons/favicon-192.png">

    <!-- Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#333333">

</head>
<body>
<main role="main">
    <article id="webslides">
        <!-- Quick Guide
          - Each parent <section> in the <article id="webslides"> element is an individual slide.
          - Vertical sliding = <article id="webslides" class="vertical">
          - <div class="wrap"> = container 90% / <div class="wrap size-50"> = 45%;
        -->

        <section>

            <!--.wrap = container (width: 90%) -->
            <div class="wrap alignleft">
                <br>
                <h1><strong>API Testing 101's: Quick and Easy</strong></h1>
                <br>
                <br>
                <br>
                <br>
                <br>
                <h4 class="content-left"><a href="http://anishanarang.com/">Anisha Narang</a><br>
                    Senior Quality Engineer <br>
                    Red Hat Inc. <br>
                    <a href="https://twitter.com/anisha_narang" title="Twitter">
                        @anisha_narang
                    </a>
                </h4>
                <h3>DevConf.CZ, 2020</h3>


            </div>

            <!-- .end .wrap -->
        </section>

        <section>
            <div class="wrap">
                <h2><strong>Agenda</strong></h2>
                <br>
                <ul>
                    <li>Overview of REST API</li>
                    <li>Introduction to API testing</li>
                    <li>Overview of different API testing frameworks</li>
                    <li>Introduction to LCC framework(lemoncheesecake)</li>
                    <li>Understanding the matchers/assertions available</li>
                    <li>Generating awesome reports</li>
                    <li>Demo</li>
                </ul>
            </div>
        </section>

        <section>
            <!--.wrap = container (width: 90%) -->
            <div class="wrap alignleft">
                <h2><strong>What is REST API?</strong></h2>
                <div>
                    <ul class="flexblock specs">
                        <li><h5>API stands for Application Programming Interface.
                        API enables communication and data exchange between two separate software systems.</h5></li>
                        <li><h5>REST is an architectural style, or design pattern, for APIs.</h5></li>
                        <li><h5>REST stands for REpresentational State Transfer.
                            It means when a RESTful API is called, the server will transfer to the client a
                            representation of the state of the requested resource.</h5></li>
                        <li><h5>The representation of the state can be in a JSON or XML format</h5></li>
                        <li>
                            <h5><h5 class="bold">API endpoint:</h5> An identifier for the resource you are interested
                                in. This is the URL for the resource, also known as the endpoint.
                            </h5>
                        </li>
                        <li>
                            <h5><h5 class="bold">HTTP method:</h5> The operation you want the server to perform on that
                                resource, in the form of an HTTP method.<br>
                                GET, POST, PUT and DELETE
                            </h5>
                        </li>

                    </ul>
                </div>
                <!-- .end .bg-white shadow -->
            </div>
            <!-- .end .wrap -->
        </section>

        <section>
            <div class="wrap alignleft">
                <h2><strong>What is API Testing?</strong></h2>
                <br>
                <ul class="flexblock specs">
                    <li><h5>API Testing is a software testing type that validates the API(Application Programming
                        Interface) of any application.</h5></li>
                    <li><h5>In short: you send calls to the API and verify the API response.</h5></li>
                </ul>
            </div>
        </section>

        <section>
            <div class="wrap">
                <h2><strong>HTTP methods:</strong></h2>
                <div class="grid">
                    <div class="column">
                        <h3>GET</h3>
                        <p>The GET method is used to retrieve information from the given server using a given URI.
                            Provides READ only access to a resource.</p>
                    </div>
                    <div class="column"><h3>POST</h3>
                        <p>The POST method is used to submit an entity to the specified resource, often causing a change
                            in state or side effects on the server.
                        </p></div>
                    <div class="column"><h3>PUT</h3>
                        <p>Replaces all current representations of the target resource with the uploaded content.</p>
                    </div>
                    <div class="column"><h3>DELETE</h3>
                        <p>The DELETE method deletes the specified resource.</p></div>
                </div>
            </div>
            <!-- .end .wrap -->
        </section>


        <section>
            <!--.wrap = container (width: 90%) -->
            <div class="wrap">
                <h2><strong>Different API testing frameworks</strong></h2>
                <!--div class="grid vertical-align"-->
                <ul class="description">
                    <li><span class="text-label">Curl:</span> curl provides a generic, language-agnostic way to demonstrate HTTP requests and responses.</li>
                    <li><span class="text-label">Postman:</span> Postman is a Google Chrome app for interacting with HTTP APIs. It offers a friendly GUI for constructing requests and reading responses.
</li>
                    <li><span class="text-label">JMeter:</span> JMeter (open source) is widely used for functional API testing although it was actually created for load testing.
</li>
                    <li><span class="text-label">Karate:</span> Karate works out of the box and allows you to construct the most complex request-response operations with no knowledge of any programming language.</li>
                    <li><span class="text-label">Pytest:</span> Pytest is a testing framework which allows us to write test codes using python.</li>
                    <li>but there is more with Python..</li>
                    <li>Let's try out some <strong>'lemoncheesecake'</strong> ;)</li>
                </ul>
                <br>


            </div>
        </section>


        <section>
            <div class="wrap">
                <h2><Strong>lemoncheesecake: a functional test framework for Python</strong></h2>
            </div>
        </section>

        <section>
            <div class="wrap">
                <h2><strong>Getting started</strong></h2>
                <br>
                <p class="text-intro"><i>lemoncheesecake</i> can be installed via pip</p>
                <br>
                <pre><code>$ pip install lemoncheesecake
</code></pre>

            </div>
        </section>

        <section>
            <div class="wrap">
                <h2><strong>Writing your test suite</strong></h2>
                <p class="text-intro">Creating a new test project</p>
                <pre><code>$lcc bootstrap test-project</code></pre>
                <p>Creates a new project directory “test-project” containing one file “project.py” (it contains your project settings)
                    and “suites”  and "fixtures" directories for you add your test suites and fixtures.</p>
                <img src="./static/images/project-tree.png">

            </div>

        </section>

        <section>
            <div class="wrap">
                <h2><strong>A suite looks like: </strong></h2>
               <pre><code class="python">
#suites/test_get_users.py

import lemoncheesecake.api as lcc
from lemoncheesecake.matching import *
import requests


SUITE = {
    "description": "Sample API tests for GET, POST, DELETE "
}

base_url = "https://jsonplaceholder.typicode.com"

@lcc.test("Verify that GET request for users/1 gives a 200 OK")
def test_get_users():
    lcc.set_step("checking for endpoint: https://jsonplaceholder.typicode.com/users/1")
    response = requests.get(url=base_url + "/users/1")
    check_that("response code", response.status_code, equal_to(200), quiet=False)

@lcc.test("Verify that GET request for /users/1 contains required params")
def test_get_users_params():
    response = requests.get(url=base_url + "/users/1")
    result = response.json()
    check_that("the response ", result, has_entry("name"))
    require_that("the response", result, has_entry("email", contains_string("@")))
    assert_that("the response ", result, has_entry("username", equal_to("Bret")))
               </code></pre>
            </div>
        </section>

        <section>
            <div class="wrap">
                <h4><strong>Running the test suite: </strong></h4>
                <pre><code>$lcc run</code></pre>
                <h4><strong>Console output look like:</strong></h4>
                <img src="./static/images/lcc_run_report.png">
            </div>
        </section>


        <section>
            <div class="wrap">
                <h2><strong>Matchers </strong></h2>
                <div class="grid vertical-align">
                    <div class="column">
                        <p class="text-intro"> <strong>The matchers </strong></p>
                        <ul>
                            <li>equal_to(expected)</li>
                            <li>not_equal_to(expected)</li>
                            <li>is_true()</li>
                            <li>is_false()</li>
                            <li>is_dict([expected])</li>
                            <li>is_list([expected])</li>
                            <li>has_item(expected)</li>
                            <li>has_items(expected)</li>
                            <li>has_entry(expected_key [,expected_value])</li>
                            <li>is_(expected)</li>
                            <li>is_not(expected)</li>
                            <li>and there are more...</li>

                        </ul>
                    </div>
                    <div class="column">
                        <p class="text-intro"><strong>The matching operations</strong></p>
                        <ul class="flexblock specs">
                            <li><h6>check_that(hint, actual, matcher, quiet=False)</h6>
                            run the matcher, log the result and return the matching result as a boolean
                            </li>
                            <li><h6>require_that(hint, actual, matcher, quiet=False)</h6>
                            run the matcher, log the result and raise an AbortTest exception in case of a match failure</li>
                            <li><h6>assert_that(hint, actual, matcher, quiet=False)</h6>
                            run the match, in case of a match failure (and only in this case) log the result and raise an AbortTest exception</li>
                        </ul>

                    </div>
                </div>
                <pre><code>data = {"title": "Title 1", "uuid": "aaa11"}
check_that("title is", data, has_entry("title", equal_to("Title 1")))
check_that("uuid is", data, has_entry("uuid", equal_to("aaa11")))
                </code></pre>
            </div>
        </section>

        <section>
            <div class="wrap">
                <h2><strong>Sample JSON Output:</strong></h2>
                <pre><code class="json">
{
  "id": 1,
  "name": "Leanne Graham",
  "username": "Bret",
  "email": "Sincere@april.biz",
  "address": {
    "street": "Kulas Light",
    "suite": "Apt. 556",
    "city": "Gwenborough",
    "zipcode": "92998-3874"
  },
  "phone": "1-770-736-8031 x56442",
  "website": "hildegard.org"
  }
}
                </code></pre>
            </div>
        </section>

         <section>
            <div class="wrap">
                <h2><strong>Let's use the matchers and write more tests..</strong></h2>
                <pre><code class="python">
@lcc.test("Verify that GET request for /users/1 contains required params")
def test_get_users_params():
    response = requests.get(url=base_url + "/users/1")
    result = response.json()
    check_that("the response ", result, has_entry("name"))
    require_that("the response", result, has_entry("email", contains_string("@")))
    assert_that("the response ", result, has_entry("username", equal_to("Bret")))
    check_that("the response ", result, has_entry("address", is_dict()))
    require_that("the response", result, has_entry("address", has_entry("city", equal_to("Gwenborough"))))


@lcc.test("Verify that POST request to /posts is successful")
def test_post_req():
    body = {
      "title": 'Title for Devconf.CZ 2020',
      "body": 'Test title by Anisha',
      "userId": 500
    }
    response = requests.post(base_url + "/posts", data=body)
    result= response.json()
    require_that("the POST request response", response.status_code, equal_to(201))
    lcc.log_info(str(result))
    check_that("the response", result, has_entry("title", equal_to("Title for Devconf.CZ 2020")))
                </code></pre>
            </div>
        </section>

        <section>
            <div class="wrap">
                <h2>Logging</h2>
                <br>
                <div class="grid sm">
                    <div class="column">
                        <ul class="description">

                            <li><strong>lemoncheesecake provides logging functions that give the user the ability to log information beyond the checks.
</strong></li>
                            <br>
                            <li> log_debug(msg)</li>
                            <li>log_info(msg)</li>
                            <li>log_warn(msg)</li>
                            <li>log_error(msg)</li>
                        </ul>
                    </div>
                    <div class="column">
<pre><code class="python">
user_name = "User 1"
lcc.log_info("User name to be added: %s " % user_name)
</code></pre>
                    </div>
                    </div>
                </div>
        </section>

        <section>
            <div class="wrap">
                <h2>Generating (awesome) reports </h2>
                <img src="./static/images/test-report.png">

                    </div>

                </div>
        </section>

        <section>
            <div class="wrap">
                <h1><strong>Demo</strong></h1>
                <br>
                <br>
                <br>
                <br>
                <p class="text-intro">Code available here: <a href="https://github.com/anarang/lemoncheesecake101">https://github.com/anarang/lemoncheesecake101</a>

                </p>
            </div>
        </section>

        <section class="fullscreen slide" style="display: none;">
        <!-- Fullscreen Video -->
        <div class="embed">
          <!--iframe frameborder="0" allowfullscreen="1" allow="autoplay; encrypted-media" title="Demo video" width="640" height="360" src="./images/test-demo-1.mov" id="w"></iframe-->
          <video controls="controls" width="800" height="600"
     name="Video Name" src="./static/images/demo-lemoncheesecakse101.mov"></video>
        </div>
        <!-- .end .embed -->
      </section>

        <section class="slide-center">
            <div class="wrap">
                <div class="content-center text-serif">
                    <h2>Any questions?</h2>
                    <br>
                    <h1><strong>Thank You :-)</strong></h1>
                    <br>

                    <p><a href="https://twitter.com/anisha_narang" title="Twitter">
                        <svg class="fa-twitter">
                            <use xlink:href="#fa-twitter"></use>
                        </svg>
                        @anisha_narang
                    </a></p>
                    <p>Slides available at: <a href="https://anarang.github.io/api101s_devconf2020/#slide=1">https://anarang.github.io/api101s_devconf2020</a>
                    </p>

                </div>
                <!-- .end .content-right -->
            </div>
            <!-- .end .wrap -->
        </section>

    </article>
    <!-- end article -->
</main>
<!-- end main -->

<!-- A global footer

  <footer role="contentinfo">
   <div class="wrap">
     <p>An <a href="https://github.com/webslides/webslides">open source solution</a>, by <a href="https://twitter.com/webslides">@webslides</a>.</p>
   </div>
 </footer>  -->

<!-- Required -->
<script src="static/js/webslides.js"></script>
<script>
      window.ws = new WebSlides();

</script>

<!-- OPTIONAL - svg-icons.js (fontastic.me - Font Awesome as svg icons) -->
<script defer src="static/js/svg-icons.js"></script>

</body>
</html>
